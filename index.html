<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0a0f16">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="1000166668.png"> 
    
    <title>Compound - Premium Calculator</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

    <style>
        /* === 1. BASE & VARIABLES === */
        :root {
            --bg-deep: #05080c;
            --glass-bg: rgba(20, 25, 40, 0.75);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --accent-gold: #D4AF37;
            /* Gradient Emas Mewah */
            --gold-gradient: linear-gradient(135deg, #BF953F 0%, #FCF6BA 40%, #B38728 70%, #FBF5B7 100%);
            --button-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
            --profit-color: #4ade80;
            --danger-color: #f87171;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body, html {
            height: 100%; width: 100%;
            font-family: 'Poppins', sans-serif;
            background: radial-gradient(circle at center, #1b2735 0%, #090a0f 100%);
            color: var(--text-primary);
            overflow: hidden;
        }

        /* === 2. SLIDE STRUCTURE (Transisi Halus) === */
        .slide {
            position: absolute; inset: 0;
            width: 100%; height: 100%;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            padding: 1.5rem;
            transition: all 0.7s cubic-bezier(0.25, 0.8, 0.25, 1);
            background: radial-gradient(circle at 50% 10%, rgba(30, 41, 59, 0.4) 0%, transparent 70%);
        }

        /* State Slide */
        #slide1 { z-index: 2; transform: translateY(0); opacity: 1; }
        #slide2 { z-index: 1; transform: translateY(100%); opacity: 0; pointer-events: none; }

        body.kalkulator-aktif #slide1 { transform: translateY(-20%); opacity: 0; pointer-events: none; }
        body.kalkulator-aktif #slide2 { transform: translateY(0); opacity: 1; pointer-events: auto; }

        /* === 3. HERO SECTION (Slide 1) === */
        #slide1 .content-wrapper {
            text-align: center; max-width: 600px;
            animation: fadeIn Up 1s ease;
        }
        .logo { width: 140px; margin-bottom: 2rem; filter: drop-shadow(0 0 15px rgba(212, 175, 55, 0.2)); }
        
        h1 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2.5rem, 8vw, 4rem);
            margin-bottom: 1rem;
            background: var(--gold-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }

        p {
            font-size: 1rem; color: var(--text-secondary); line-height: 1.8;
            margin-bottom: 2.5rem; font-weight: 300;
        }

        /* === 4. CALCULATOR LAYOUT (Slide 2) === */
        /* Container Glassmorphism */
        .glass-panel {
            width: 100%; max-width: 500px;
            background: var(--glass-bg);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 1.5rem;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            display: flex; flex-direction: column;
            max-height: 90vh; /* Agar tidak melebihi layar */
            transition: max-width 0.4s ease;
        }

        h2 {
            font-family: 'Playfair Display', serif;
            text-align: center; font-size: 1.8rem;
            color: var(--accent-gold); margin-bottom: 0.5rem;
        }

        .kurs-badge {
            text-align: center; font-size: 0.85rem; color: var(--text-secondary);
            margin-bottom: 1.5rem; padding-bottom: 0.5rem;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        /* Layout Grid untuk Form */
        .calc-grid {
            display: grid; gap: 1rem;
            overflow-y: auto; /* Scroll jika konten panjang */
            padding-right: 5px; /* Space untuk scrollbar */
        }

        /* Scrollbar Halus */
        .calc-grid::-webkit-scrollbar, .table-wrapper::-webkit-scrollbar { width: 4px; }
        .calc-grid::-webkit-scrollbar-thumb, .table-wrapper::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }

        .input-group label {
            display: block; font-size: 0.75rem; letter-spacing: 1px;
            text-transform: uppercase; color: var(--text-secondary);
            margin-bottom: 0.4rem;
        }

        input[type="number"] {
            width: 100%; background: rgba(0,0,0,0.3); border: 1px solid var(--border-color, #334155);
            padding: 0.8rem; border-radius: 12px; color: #fff; font-family: 'Poppins', sans-serif;
            font-size: 1rem; transition: 0.3s;
        }
        input[type="number"]:focus {
            outline: none; border-color: var(--accent-gold);
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.15);
        }

        /* Checkbox Custom Elegan */
        .options-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 0.8rem;
            background: rgba(0,0,0,0.2); padding: 1rem; border-radius: 12px;
        }
        .cb-item {
            display: flex; align-items: center; gap: 0.5rem; font-size: 0.9rem;
            cursor: pointer;
        }
        input[type="checkbox"] {
            accent-color: var(--accent-gold); width: 18px; height: 18px; cursor: pointer;
        }

        /* Buttons */
        .btn-gold {
            width: 100%; padding: 1rem; border: none; border-radius: 12px;
            background: var(--gold-gradient); color: #1e293b;
            font-weight: 700; font-size: 1rem; cursor: pointer;
            box-shadow: var(--button-shadow);
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 1rem;
        }
        .btn-gold:active { transform: scale(0.98); }
        .btn-back {
            position: absolute; top: 20px; left: 20px; z-index: 10;
            background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.1);
            color: #fff; padding: 8px 16px; border-radius: 20px;
            font-size: 0.8rem; cursor: pointer; backdrop-filter: blur(4px);
        }

        /* === 5. RESULT TABLE (Presisi) === */
        .table-wrapper {
            margin-top: 1.5rem; border-radius: 12px; overflow: auto;
            border: 1px solid rgba(255,255,255,0.05);
            max-height: 300px;
        }
        table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
        
        th {
            background: #0f172a; position: sticky; top: 0; z-index: 5;
            padding: 1rem; font-weight: 500; color: var(--accent-gold);
            text-transform: uppercase; letter-spacing: 0.5px;
            font-size: 0.7rem; white-space: nowrap;
        }
        td {
            padding: 0.8rem 1rem; border-bottom: 1px solid rgba(255,255,255,0.05);
            text-align: right; white-space: nowrap; font-variant-numeric: tabular-nums;
        }
        /* Sticky First Column (Hari) */
        td:first-child, th:first-child {
            position: sticky; left: 0; background: #1e293b; z-index: 6;
            text-align: center; border-right: 1px solid rgba(255,255,255,0.1);
        }
        th:first-child { z-index: 7; background: #0f172a; }

        tr:hover td { background: rgba(212, 175, 55, 0.1); }
        .val-gold { color: var(--accent-gold); font-weight: 500; }
        .val-profit { color: var(--profit-color); }

        /* Efek Tekan Lama */
        td.is-pressing {
            background-color: var(--accent-gold) !important; color: #000 !important;
            transform: scale(0.95); transition: 0.2s;
        }

        /* === 6. MODAL === */
        .modal-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.8);
            backdrop-filter: blur(8px); z-index: 100;
            display: flex; align-items: center; justify-content: center;
            opacity: 0; visibility: hidden; transition: 0.3s;
        }
        .modal-overlay.active { opacity: 1; visibility: visible; }
        .modal-box {
            background: #1e293b; padding: 2rem; border-radius: 20px;
            text-align: center; width: 90%; max-width: 320px;
            border: 1px solid var(--accent-gold);
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.2);
            transform: scale(0.8); transition: 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .modal-overlay.active .modal-box { transform: scale(1); }
        .modal-usd { font-size: 1.2rem; color: var(--text-secondary); margin-bottom: 0.5rem; }
        .modal-idr { font-size: 2rem; font-weight: 700; color: #fff; line-height: 1.2; }
        .close-modal { 
            position: absolute; top: 10px; right: 15px; font-size: 1.5rem; cursor: pointer; color: #64748b; 
        }

        /* === 7. RESPONSIVE LANDSCAPE LOGIC (THE MAGIC) === */
        /* Ketika layar Landscape di HP (Tinggi < 600px) */
        @media (orientation: landscape) and (max-height: 600px) {
            .glass-panel {
                max-width: 90%; /* Lebar penuh */
                height: 90vh;
                display: grid;
                grid-template-columns: 300px 1fr; /* Kiri: Input Fixed, Kanan: Tabel Auto */
                grid-template-rows: auto 1fr; /* Header auto, konten fill */
                gap: 1rem;
                padding: 1rem;
            }

            /* Header Judul di landscape */
            h2 { grid-column: 1 / -1; margin: 0; font-size: 1.4rem; text-align: left; }
            .kurs-badge { grid-column: 1 / -1; text-align: left; margin: 0; border: none; font-size: 0.8rem; }
            .btn-back { top: 10px; left: auto; right: 10px; }

            /* Bagian Input (Kiri) */
            .calc-grid {
                grid-column: 1;
                display: flex; flex-direction: column;
                overflow-y: auto; padding-right: 5px;
            }
            .options-grid { grid-template-columns: 1fr; gap: 0.5rem; } /* Checkbox jadi 1 kolom biar rapi */

            /* Bagian Tabel (Kanan) - Biar luas */
            .table-wrapper {
                grid-column: 2;
                grid-row: 3 / span 2; /* Full height di kanan */
                margin: 0;
                max-height: 100%;
            }
            
            /* Penyesuaian agar input group pas di kolom kiri */
            .btn-gold { margin-top: auto; } /* Tombol selalu di bawah kolom input */
        }

        /* Adjust Portrait Mobile */
        @media (max-width: 480px) and (orientation: portrait) {
            .logo { width: 100px; }
            h1 { font-size: 2.8rem; }
            .glass-panel { height: 95vh; padding: 1.2rem; }
            .table-wrapper { max-height: 45vh; }
        }

    </style>
</head>
<body>

    <div id="slide1" class="slide">
        <div class="content-wrapper">
            <img src="1000166668.png" alt="Logo" class="logo">
            <h1>Selamat Datang<br>di Compound</h1>
            <p>
                Setiap keuntungan kecil adalah benih emas.<br>
                Temukan kekuatan compounding yang mengubah konsistensi menjadi kekayaan eksponensial.
            </p>
            <button class="btn-gold" style="max-width: 200px; margin: 0 auto;" onclick="tampilkanKalkulator()">Mulai Simulasi</button>
        </div>
    </div>

    <div id="slide2" class="slide">
        <div class="glass-panel">
            <button class="btn-back" onclick="tampilkanMotivasi()">&larr; Kembali</button>
            
            <h2>Compound Calculator</h2>
            <div id="kursDisplay" class="kurs-badge">Memuat kurs real-time...</div>

            <div class="calc-grid">
                <div class="input-group">
                    <label>Modal Awal (USDT)</label>
                    <input type="number" id="modal" value="100" step="0.01">
                </div>
                
                <div style="display: flex; gap: 10px;">
                    <div class="input-group" style="flex:1">
                        <label>Hari</label>
                        <input type="number" id="targetHari" value="41" min="1">
                    </div>
                    <div class="input-group" style="flex:1">
                        <label>Profit (%)</label>
                        <input type="number" id="bep" value="0.85" step="0.01">
                    </div>
                </div>

                <div class="input-group">
                    <label>Sesi Aktif</label>
                    <div class="options-grid">
                        <label class="cb-item"><input type="checkbox" id="siang" checked> Siang</label>
                        <label class="cb-item"><input type="checkbox" id="sinyal4"> Sinyal-4</label>
                        <label class="cb-item"><input type="checkbox" id="sinyal3"> Sinyal-3</label>
                        <label class="cb-item"><input type="checkbox" id="malam" checked> Malam</label>
                    </div>
                </div>

                <button class="btn-gold" onclick="hitungCompounding()">Hitung Potensi</button>
                
                </div>

            <div class="table-wrapper">
                <table id="hasilTabel">
                    <thead></thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="konversiModal" class="modal-overlay">
        <div class="modal-box">
            <span id="modalClose" class="close-modal">&times;</span>
            <div id="modalUsdValue" class="modal-usd">$0.00</div>
            <div id="modalIdrValue" class="modal-idr">Rp 0</div>
            <p style="font-size: 0.8rem; color: #64748b; margin-top: 10px;">Estimasi dalam Rupiah</p>
        </div>
    </div>

    <script>
        function tampilkanKalkulator() { document.body.classList.add('kalkulator-aktif'); }
        function tampilkanMotivasi() { document.body.classList.remove('kalkulator-aktif'); }

        let liveKursUsdToIdr = 16300; 
        const idrFormatter = new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0, maximumFractionDigits: 0 });

        async function fetchAndUpdateKurs() {
            const kursEl = document.getElementById('kursDisplay');
            try {
                const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=tether&vs_currencies=idr');
                if (!response.ok) throw new Error('API Error');
                const data = await response.json();
                liveKursUsdToIdr = parseFloat(data.tether.idr);
                kursEl.innerHTML = `Kurs Live: 1 USDT â‰ˆ Rp ${new Intl.NumberFormat('id-ID').format(liveKursUsdToIdr)}`;
                kursEl.style.color = 'var(--profit-color)';
            } catch (error) {
                kursEl.innerHTML = `Kurs Default: 1 USDT = Rp ${new Intl.NumberFormat('id-ID').format(liveKursUsdToIdr)}`;
            }
        }
        
        function formatUsd(val) {
            return `<span class="val-gold">$</span>${val.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
        }

        function hitungCompounding() {
            const modal = parseFloat(document.getElementById('modal').value) || 0;
            const hari = parseInt(document.getElementById('targetHari').value) || 1;
            const bep = parseFloat(document.getElementById('bep').value) / 100 || 0;
            const aktif = {
                siang: document.getElementById('siang').checked,
                sinyal4: document.getElementById('sinyal4').checked,
                sinyal3: document.getElementById('sinyal3').checked,
                malam: document.getElementById('malam').checked
            };

            const thead = document.querySelector('#hasilTabel thead');
            const tbody = document.querySelector('#hasilTabel tbody');
            thead.innerHTML = ''; tbody.innerHTML = '';

            // Header Logic
            let h = '<tr><th>Hari</th><th>Modal Awal</th>';
            if (aktif.siang) h += '<th>Siang</th>';
            if (aktif.sinyal4) h += '<th>Sinyal-4</th>';
            if (aktif.sinyal3) h += '<th>Sinyal-3</th>';
            if (aktif.malam) h += '<th>Malam</th>';
            h += '<th>Akhir</th><th>Total Profit</th></tr>';
            thead.innerHTML = h;

            let saldo = modal;
            let accProfit = 0;

            for (let i = 1; i <= hari; i++) {
                let start = saldo;
                let pSiang=0, pS4=0, pS3=0, pMalam=0;

                if (aktif.siang) { pSiang = saldo * bep; saldo += pSiang; }
                if (aktif.sinyal4) { pS4 = saldo * bep; saldo += pS4; }
                if (aktif.sinyal3) { pS3 = saldo * bep; saldo += pS3; }
                if (aktif.malam) { pMalam = saldo * bep; saldo += pMalam; }

                let end = saldo;
                let dailyProfit = end - start;
                accProfit += dailyProfit;

                let r = `<tr>
                    <td>${i}</td>
                    <td data-val="${start}">${formatUsd(start)}</td>`;
                
                if (aktif.siang) r += `<td class="val-profit" data-val="${pSiang}">${formatUsd(pSiang)}</td>`;
                if (aktif.sinyal4) r += `<td class="val-profit" data-val="${pS4}">${formatUsd(pS4)}</td>`;
                if (aktif.sinyal3) r += `<td class="val-profit" data-val="${pS3}">${formatUsd(pS3)}</td>`;
                if (aktif.malam) r += `<td class="val-profit" data-val="${pMalam}">${formatUsd(pMalam)}</td>`;

                r += `<td data-val="${end}">${formatUsd(end)}</td>
                      <td class="val-profit" data-val="${accProfit}">${formatUsd(accProfit)}</td>
                </tr>`;
                tbody.insertAdjacentHTML('beforeend', r);
            }
        }

        // --- EVENT LISTENERS & LONG PRESS ---
        document.addEventListener('DOMContentLoaded', () => {
            fetchAndUpdateKurs().then(hitungCompounding);

            const modal = document.getElementById('konversiModal');
            const mUsd = document.getElementById('modalUsdValue');
            const mIdr = document.getElementById('modalIdrValue');
            const modalInput = document.getElementById('modal');
            const tableBody = document.querySelector('#hasilTabel tbody');

            // Modal Logic
            window.showDetails = (val) => {
                mUsd.innerHTML = formatUsd(val);
                mIdr.innerText = idrFormatter.format(val * liveKursUsdToIdr);
                modal.classList.add('active');
            };
            document.getElementById('modalClose').onclick = () => modal.classList.remove('active');
            modal.onclick = (e) => { if(e.target === modal) modal.classList.remove('active'); };

            // Touch/Click Logic
            let timer, isLongPress, pressCell;
            
            const startPress = (e) => {
                const cell = e.target.closest('td');
                if(!cell) return;
                
                // Cek kolom modal akhir (2 kolom terakhir sebelum profit)
                // Simplifikasi: jika cell punya data-val, kita proses
                isLongPress = false;
                pressCell = cell;
                
                timer = setTimeout(() => {
                    // Logic Copy Modal Akhir ke Input (Long Press)
                    // Hanya izinkan copy dari kolom "Akhir" (kolom ke-2 dari belakang di row)
                    const parent = cell.parentElement;
                    const index = Array.from(parent.children).indexOf(cell);
                    const length = parent.children.length;
                    
                    // Kolom Modal Akhir biasanya di index (length - 2)
                    if (index === length - 2) {
                        isLongPress = true;
                        cell.classList.add('is-pressing');
                        const val = parseFloat(cell.getAttribute('data-val'));
                        if(val) {
                            modalInput.value = val.toFixed(2);
                            hitungCompounding();
                            // Visual Feedback pada Input
                            modalInput.style.borderColor = 'var(--profit-color)';
                            setTimeout(() => modalInput.style.borderColor = '', 500);
                        }
                    }
                }, 600);
            };

            const cancelPress = () => {
                clearTimeout(timer);
                if(pressCell) pressCell.classList.remove('is-pressing');
            };

            const endPress = (e) => {
                cancelPress();
                if(!isLongPress) {
                    // Normal Click (Show Modal IDR)
                    const cell = e.target.closest('td');
                    if(cell) {
                        const val = parseFloat(cell.getAttribute('data-val'));
                        if(val && !isNaN(val)) showDetails(val);
                    }
                }
            };

            // Pasang Listener
            tableBody.addEventListener('touchstart', startPress, {passive:true});
            tableBody.addEventListener('touchend', endPress);
            tableBody.addEventListener('touchmove', cancelPress);
            tableBody.addEventListener('mousedown', startPress);
            tableBody.addEventListener('mouseup', endPress);
            tableBody.addEventListener('mouseleave', cancelPress);
        });
    </script>
</body>
</html>
